{% extends 'factuai/base.html' %}
{% load static %}

{% block title %}Subir Facturas - FactuAI{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/upload.css' %}">
{% endblock %}

{% block content %}
<!-- Cabecera -->
<div class="upload-header fade-in">
    <h1 class="upload-title"><i class="fas fa-cloud-upload-alt me-3"></i>Subir Facturas</h1>
    <p class="upload-subtitle">Carga tus documentos de manera rápida y sencilla. El sistema procesará automáticamente tus facturas y organizará toda la información importante.</p>
</div>

<div class="row justify-content-center">
   <div class="col-md-10">
       <div class="card shadow-sm fade-in" style="border-radius: 16px; overflow: hidden; border: none; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);">
           <div class="card-body p-4">
               <div class="row mb-4">
                   <div class="col-12">
                       <div class="alert alert-info mb-0">
                           <i class="fas fa-info-circle"></i> Sube tus facturas en formato PDF, JPG, PNG, ZIP o RAR. 
                           Las facturas serán procesadas automáticamente para extraer información clave como empresa, número de factura y fechas.
                       </div>
                   </div>
               </div>
               
               <form id="uploadForm" method="post" enctype="multipart/form-data">
                   {% csrf_token %}
                   
                   <div class="upload-zone" id="dropZone">
                       <i class="fas fa-cloud-upload-alt upload-icon"></i>
                       <h3 class="mb-3">Arrastra y suelta tus facturas aquí</h3>
                       <p class="text-muted">o</p>
                       <button type="button" class="btn btn-primary btn-lg" id="browseBtn">
                           <i class="fas fa-folder-open me-2"></i>Seleccionar Archivos
                       </button>
                       <input type="file" name="file" id="fileInput" class="file-upload-input" multiple>
                       <p class="mt-3 text-muted">
                           <small>Formatos permitidos: PDF, JPG, PNG, ZIP, RAR. Tamaño máximo: 50MB</small>
                       </p>
                   </div>
                   
                   <div class="selected-files card mt-4" id="fileList" style="display: none;">
                       <div class="card-header">
                           <h5 class="mb-0"><i class="fas fa-file-alt"></i>Archivos Seleccionados</h5>
                       </div>
                       <div class="card-body p-0">
                           <ul class="list-group list-group-flush" id="fileListItems">
                               <!-- Los archivos seleccionados se mostrarán aquí -->
                           </ul>
                       </div>
                   </div>
                   
                   <div class="progress-wrapper">
                       <label class="form-label"><i class="fas fa-spinner me-2"></i>Progreso de Subida</label>
                       <div class="progress">
                           <div class="progress-bar progress-bar-striped progress-bar-animated" 
                               role="progressbar" style="width: 0%;" id="uploadProgress">0%</div>
                       </div>
                   </div>
                   
                   <div class="text-center">
                       <button type="submit" class="btn btn-success btn-lg btn-upload" id="submitBtn">
                           <i class="fas fa-upload me-2"></i>Subir Archivos
                       </button>
                   </div>
               </form>
           </div>
       </div>
       
       <div class="info-card fade-in" style="animation-delay: 0.2s;">
           <div class="card-header">
               <h5 class="mb-0"><i class="fas fa-lightbulb"></i>Información Importante</h5>
           </div>
           <div class="card-body p-4">
               <div class="row g-4">
                   <div class="col-md-4">
                       <div class="info-feature">
                           <div class="info-icon">
                               <i class="fas fa-file-invoice"></i>
                           </div>
                           <h5 class="text-center">Formatos Soportados</h5>
                           <p class="text-center">Acepta documentos en formato PDF, JPG, PNG así como archivos comprimidos ZIP o RAR para facilitar la carga múltiple.</p>
                       </div>
                   </div>
                   <div class="col-md-4">
                       <div class="info-feature">
                           <div class="info-icon">
                               <i class="fas fa-cogs"></i>
                           </div>
                           <h5 class="text-center">Procesamiento Inteligente</h5>
                           <p class="text-center">Nuestro sistema de IA analizará automáticamente tus facturas para extraer empresa, número, fecha y otros datos relevantes.</p>
                       </div>
                   </div>
                   <div class="col-md-4">
                       <div class="info-feature">
                           <div class="info-icon">
                               <i class="fas fa-folder-open"></i>
                           </div>
                           <h5 class="text-center">Organización Automática</h5>
                           <p class="text-center">Tus facturas quedarán perfectamente organizadas por empresa, año, mes y día para facilitar su búsqueda y gestión.</p>
                       </div>
                   </div>
               </div>
           </div>
       </div>
   </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/upload.js' %}"></script>
{% endblock %}